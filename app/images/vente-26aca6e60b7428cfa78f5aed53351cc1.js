function supportsVideo(){return!!document.createElement("video").canPlayType}function supportsH264(){if(!supportsVideo())return!1;var e=document.createElement("video");return"probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')}function boitesChargees(){surveillerBoites(),jQuery("select[name=magasins_id]").change(function(){location="/magasins/"+this.value})}function maj_boite_onglet(){"classement"==$("#boite_data_choix_page").val()?($("#div_classement").show(),$("#div_page").hide(),$("#boite_data_page").attr("disabled","disabled"),$("#boite_data_classement").removeAttr("disabled")):($("#div_classement").hide(),$("#div_page").show(),$("#boite_data_classement").attr("disabled","disabled"),$("#boite_data_page").removeAttr("disabled"))}function surveillerBoites(){jQuery(".nbtx_teaser, .boite_teaser .contenu_teaser").each(function(){var e=jQuery(this);if(0==e.find(".bx-wrapper").length){var t="coulisse"==e.data("effet")?"horizontal":"fade",r=1e3*e.data("interval"),a=1e3*e.data("duree");e.find("ul").bxSlider({auto:!0,mode:t,pause:r,speed:a,controls:!1,pager:!0,pagerSelector:"#pager",pagerActiveClass:"actif",buildPager:function(){return""}})}}),jQuery(".nbtx_carousel").each(function(){var e=jQuery(this);0==e.find(".bx-wrapper").length&&e.find("ul").bxSlider({auto:!0,autoControls:!0,displaySlideQty:3,moveSlideQty:3})})}function contact(){$("a[href='/pages/contact']").first().click()}function participer_concours(){for(var e=0,t="";e<document.getElementsByName("inscription[civilite]").length&&!document.getElementsByName("inscription[civilite]")[e].checked;)e+=1;if(e==document.getElementsByName("inscription[civilite]").length&&(t="Vous devez choisir votre civilité. <br/>"),$("#inscription_nom").attr("value").length<2&&(t+="Vous devez saisir votre nom. <br/>"),$("#inscription_prenom").attr("value").length<2&&(t+="Vous devez saisir votre prénom. <br/>"),0==$("#jour").attr("value").length||0==$("#mois").attr("value").length||0==$("#annee").attr("value").length)t+="Vous devez saisir votre date de naissance. <br/>";else if(isNaN(parseInt($("#jour").attr("value")))||isNaN(parseInt($("#mois").attr("value")))||isNaN(parseInt($("#annee").attr("value"))))t+="Votre date de naissance est invalide. <br/>";else{var r=new Date(parseInt($("#annee").attr("value")),parseInt($("#mois").attr("value"))-1,parseInt($("#jour").attr("value")));if(r.getDate()!=parseInt($("#jour").attr("value"))||r.getMonth()+1!=parseInt($("#mois").attr("value"))||r.getFullYear()!=parseInt($("#annee").attr("value")))t+="Votre date de naissance est invalide. <br/>";else{var a=new Date;a.setFullYear(a.getFullYear()-18),r>a&&(t+="Vous devez avoir 18 ans pour participer. <br/>")}}var i=new RegExp("^[a-z0-9]+([_|.|-]{1}[a-z0-9]+)*@[a-z0-9]+([_|.|-]{1}[a-z0-9]+)*[.]{1}[a-z]{2,6}$","i");i.test($("#inscription_mail").attr("value"))||(t+="Votre adresse mail est invalide. <br/>"),isNaN(parseInt($("#inscription_cp").attr("value")))&&(t+="Votre code postal est invalide. <br/>"),$("#inscription_ville").attr("value").length<2&&(t+="Vous devez saisir votre ville. <br/>"),$("#reglement").prop("checked")||(t+="Vous devez accepter le règlement du jeu pour participer. <br/>"),""==t?$("#form_concours_inscription").submit():($("#message_erreur").attr("value",t),$("#form_erreur_concours_inscription").submit())}function add_panier_observe(){jQuery("#ajouter_au_panier input[type=text]").observe_field(1,function(){var e=jQuery(this),t=parseInt(e.val(),10);(isNaN(t)||0>t||t>99)&&e.val(0);var r=e.parent().hasClass("quantite_2")?2:1;champ_sel=r,add_panier_submit("quantite")}),jQuery("#ajouter_au_panier .plusmoins").click(function(e){var t=jQuery(e.target),r=t.parent().hasClass("quantite_2")?2:1;champ_sel=r,add_panier_inc(r,t.hasClass("plus")?1:-1)})}function add_panier_erreur(e,t){t?jQuery("#saisie_qte"+e).removeClass("fieldWithErrors"):jQuery("#saisie_qte"+e).addClass("fieldWithErrors")}function add_panier_focus(){jQuery("#ajouter_au_panier #saisie_qte"+champ_sel).focus(),jQuery("#ajouter_au_panier #saisie_qte"+champ_sel).select()}function add_panier_inc(e,t){var r="#ajouter_au_panier .quantite_"+e+" .qte",a=Math.min(99,Math.max(0,parseInt(jQuery(r).val(),10)+t));jQuery(r).val(a)}function add_panier_submit(e){"confirmer"==e&&boiteSurFond.chargement(),jQuery.post(window.location.pathname+"/ajout_panier",{article_id:jQuery("#ajouter_au_panier #article").val(),qte:jQuery("#ajouter_au_panier #saisie_qte1").val(),qte2:jQuery("#ajouter_au_panier #saisie_qte2").val(),deplacer:jQuery("#ajouter_au_panier #deplacer").val(),form_action:e})}jQuery.Class("MenuProduits",{init:function(){this.onglet_courant=null,this.timer=null},ouvrir:function(e){if(e!=this.onglet_courant){var t=null!=this.onglet_courant,r=t?"fade":"blind",a=t?100:500;this.fermer(!0),jQuery("#onglet_rajout_"+e).css("visibility","visible"),jQuery("#onglet_"+e).css("background-color",jQuery("#onglet_"+e).attr("couleur_fond_survol")),jQuery("#onglet_"+e).css("color",jQuery("#onglet_"+e).attr("couleur_texte_survol")),jQuery("#sous_menu_produits_"+e).show(r,{},a),this.onglet_courant=e}},fermer:function(e){if(null!=this.onglet_courant){var t=e?"fade":"blind",r=e?200:500;jQuery("#sous_menu_produits_"+this.onglet_courant).hide(t,{},r);var a=this.onglet_courant;setTimeout(function(){jQuery("#onglet_rajout_"+a).css("visibility","hidden")},r-50),setTimeout(function(){jQuery("#onglet_"+a).css("background-color",jQuery("#onglet_"+a).attr("couleur_fond_origine")),jQuery("#onglet_"+a).css("color",jQuery("#onglet_"+a).attr("couleur_texte_origine"))},r/2),this.onglet_courant=null}},lancer_timer:function(e,t){var r=!1,a=this.timer;null==a?r=!0:(clearTimeout(a.timeout),r=!0),r&&(this.timer={action:e,param:t,timeout:setTimeout("menu_produits."+e+"("+t+"); menu_produits.timer = null;",200)})},get_idx:function(e){for(var t=null;null==t;)e.attr("id")&&(t=e.attr("id")),null==t&&(e=e.parent());var r=null;return t&&-1!=t.indexOf("onglet_")?r=parseInt(t.substr(7),10):t&&-1!=t.indexOf("sous_menu_produits_")&&(r=parseInt(t.substr(19),10)),r}});var menu_produits=new MenuProduits;jQuery(document).ready(function(){jQuery(".menu_produits .onglet,.sous_menu_produits").on("mouseover",function(e){var t=jQuery(e.currentTarget),r=menu_produits.get_idx(t);null!=r&&menu_produits.lancer_timer("ouvrir",r)}),jQuery(".menu_produits .onglet,.sous_menu_produits").on("mouseout",function(){menu_produits.lancer_timer("fermer")})}),jQuery(document).ready(function(){boitesChargees()}),jQuery(document).ajaxSuccess(function(){boitesChargees(),maj_boite_onglet(),jQuery("#boite_data_choix_page").change(function(){maj_boite_onglet()})});var champ_sel=1;